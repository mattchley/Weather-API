script repository

function buildQueryURL() {
    var APIKey = "166a433c57516f51dfab1f7edaed8413";
    var city = "Stockholm"
    // Here we are building the URL we need to query the database
    var queryURL = "https://api.openweathermap.org/data/2.5/weather?" +
        "q=" + city + "=imperial&appid=" + APIKey;

}

function updatePage(WeatherData) {
    // Get from the form the number of results to display
    // API doesn't have a "limit" parameter, so we have to do this ourselves
    var numArticles = $("#article-count").val();

    // Log the NYTData to console, where it will show up as an object
    console.log(WeatherData);
    console.log("------------------------------------");

    // Loop through and build elements for the defined number of articles
    for (var i = 0; i < numArticles; i++) {
        // Get specific article info for current index
        var article = NYTData.response.docs[i];

        // Increase the articleCount (track article # - starting at 1)
        var articleCount = i + 1;

        // Create the  list group to contain the articles and add the article content for each
        var $articleList = $("<ul>");
        $articleList.addClass("list-group");

        // Add the newly created element to the DOM
        $("#article-section").append($articleList);

        // If the article has a headline, log and append to $articleList
        var headline = article.headline;
        var $articleListItem = $("<li class='list-group-item articleHeadline'>");

        if (headline && headline.main) {
            console.log(headline.main);
            $articleListItem.append(
                "<span class='label label-primary'>" +
                articleCount +
                "</span>" +
                "<strong> " +
                headline.main +
                "</strong>"
            );
        }

        // If the article has a byline, log and append to $articleList
        var byline = article.byline;

        if (byline && byline.original) {
            console.log(byline.original);
            $articleListItem.append("<h5>" + byline.original + "</h5>");
        }

        // Log section, and append to document if exists
        var section = article.section_name;
        console.log(article.section_name);
        if (section) {
            $articleListItem.append("<h5>Section: " + section + "</h5>");
        }

        // Log published date, and append to document if exists
        var pubDate = article.pub_date;
        console.log(article.pub_date);
        if (pubDate) {
            $articleListItem.append("<h5>" + article.pub_date + "</h5>");
        }

        // Append and log url
        $articleListItem.append("<a href='" + article.web_url + "'>" + article.web_url + "</a>");
        console.log(article.web_url);

        // Append the article
        $articleList.append($articleListItem);
    }
}
function clear() {
    $("#article-section").empty();
}

$("#city-search").on("click", function (event) {
    // This line allows us to take advantage of the HTML "submit" property
    // This way we can hit enter on the keyboard and it registers the search
    // (in addition to clicks). Prevents the page from reloading on form submit.
    event.preventDefault();

    // Empty the region associated with the articles
    clear();

    // Build the query URL for the ajax request to the NYT API
    var queryURL = buildQueryURL();

    // Make the AJAX request to the API - GETs the JSON data at the queryURL.
    // The data then gets passed as an argument to the updatePage function
    $.ajax({
        url: queryURL,
        method: "GET"
    }).then(updatePage);
});

5 display
function renderFiveDay() {
        //     $.ajax({

        //         url: queryURL,
        //         method: "GET"
        //     })
        //         .then(function (response) {
        //             var lat = response.coord.lat;
        //             var lon = response.coord.lon;

        //             var fiveURL = "http://api.openweathermap.org/data/2.5/forecast?appid=3a92bc0a0ca29575a3569a00c0268022&" + "&lat=" + lat + "&lon=" + lon
        //             $.ajax({

        //                 url: fiveURL,
        //                 method: "GET"
        //             })
        //                 .then(function (response) {
        //                     console.log(response)
        //                     var fiveDayTitleOne = response.list[0].dt_txt;
        //                     var fiveDayTempOne = response.list[0].main.temp;
        //                     var fiveDayHumidityOne = response.list[0].main.humidity;

        //                     var fiveDayTitleTwo = response.list[1].dt_txt;
        //                     var fiveDayTempTwo = response.list[1].main.temp;
        //                     var fiveDayHumidityTwo = response.list[1].main.humidity;

        //                     var fiveDayTitleThree = response.list[2].dt_txt;
        //                     var fiveDayTempThree = response.list[2].main.temp;
        //                     var fiveDayHumidityThree = response.list[2].main.humidity;

        //                     var fiveDayTitleFour = response.list[3].dt_txt;
        //                     var fiveDayTempFour = response.list[3].main.temp;
        //                     var fiveDayHumidityFour = response.list[3].main.humidity;

        //                     var fiveDayTitleFive = response.list[4].dt_txt;
        //                     var fiveDayTempFive = response.list[4].main.temp;
        //                     var fiveDayHumidityFive = response.list[4].main.humidity;

        //                     fiveWeatherTitleOne.text(fiveDayTitleOne)
        //                     fiveWeatherTempOne.text('Temp: ' + fiveDayTempOne + 'F')
        //                     fiveWeatherHumidityOne.text('Humidity: ' + fiveDayHumidityOne + '%')
                            
        //                     fiveWeatherTitleTwo.text(fiveDayTitleTwo)
        //                     fiveWeatherTempTwo.text('Temp: ' + fiveDayTempTwo + 'F')
        //                     fiveWeatherHumidityTwo.text('Humidity: ' + fiveDayHumidityTwo + '%')
                            
        //                     fiveWeatherTitleThree.text(fiveDayTitleThree)
        //                     fiveWeatherTempThree.text('Temp: ' + fiveDayTempThree + 'F')
        //                     fiveWeatherHumidityThre.text('Humidity: ' + fiveDayHumidityThree + '%')
                            
        //                     fiveWeatherTitleFour.text(fiveDayTitleFour)
        //                     fiveWeatherTempFour.text('Temp: ' + fiveDayTempFour + 'F')
        //                     fiveWeatherHumidityFour.text('Humidity: ' + fiveDayHumidityFour + '%')
                            
        //                     fiveWeatherTitleFive.text(fiveDayTitleFive)
        //                     fiveWeatherTempFive.text('Temp: ' + fiveDayTempFive + 'F')
        //                     fiveWeatherHumidityFive.text('Humidity: ' + fiveDayHumidityFive + '%')

        //                     // for (i = 0; i < 5; i++) {
        //                     //     var data = response.list[i]

        //                     //     // put card class and details here
        //                     // }
        //                 })
        //         })


        // }
        // renderFiveDay();